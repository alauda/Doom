---
weight: 20
i18n:
  title:
    en: Capacity Planning
sourceSHA: 6320c5c41ce57ca7cb449742cdba84e35ef8ee486a1d7da14d2c8d3787276ea5
---

# 容量规划 \{#scale}

在安装管理集群之前，必须根据业务目标和实际需求选择适合的安装场景。不同场景对基础设施资源配置和架构设计的要求存在显著差异，以下是三种典型场景的规划建议：

### 安装场景选择 \{#scenario}

#### 场景一：功能验证

**适用范围**  
该场景适合用于平台功能验证、演示环境搭建或技术可行性测试，专注于验证平台的核心功能，不承载生产级业务流量，因此资源配置设置为最低水平。

**核心特性**

- **单节点部署**：控制平面和计算功能整合在一个节点上。
- **轻量负载**：仅运行核心平台组件，最多支持 10 个演示 Pod。
- **非生产用途**：不满足业务连续性和高可用性需求。

**资源配置要求**

| 维度     | 规格要求               |
| -------- | ---------------------- |
| 节点数量 | 1 台（物理机或虚拟机） |
| CPU      | ≥16 核                 |
| 内存     | ≥32GB                  |

**架构说明**

- 管理集群以单节点形式部署，整合所有控制和计算功能。
- 所有业务负载均在此节点运行（建议演示 Pod 数量 ≤ 10）。
- 不支持横向扩展，因此不适合生产环境。

---

#### 场景二：ISV 集成交付

**适用范围**  
此场景针对独立软件供应商（ISV）的标准化交付需求，安装管理集群时，既负责平台管理，又能直接运行 ISV 应用，无需额外部署业务集群。

**核心特性**

- **生产级部署**：直接承载 ISV 业务应用，满足生产环境的服务水平协议（SLA）。
- **资源协同**：节点配置既满足平台组件的要求，也满足 ISV 应用的负载需求。
- **高可用保障**：至少 3 个控制节点构成高可用架构。

**资源配置要求**

| 部署模式     | 节点类型 | 数量 | 最小规格              | 推荐规格           | 备注                                        |
| ------------ | -------- | ---- | --------------------- | ------------------ | ------------------------------------------- |
| **最小部署** | 控制节点 | 3    | 8C16GB + ISV 需求     | 12C24GB + ISV 需求 | 建议预留约 30% 的冗余资源                   |
|              | 计算节点 | 0    | —                     | —                  | 控制节点共享运行 ISV 应用                   |
| **推荐部署** | 控制节点 | 3    | 8C16GB                | 12C24GB            | 运行 Kubernetes 组件及平台控制平面          |
|              | 计算节点 | ≥2   | 根据 ISV 应用负载需求 | —                  | 独立运行 ISV 应用，建议实现高可用（HA）部署 |

**架构说明**

- 安装管理集群时，同时部署平台组件和 ISV 业务 Pod，建议使用节点污点（Taint）来隔离关键组件。
- ISV 应用建议在专用计算节点上运行，以避免与控制平面资源之间的竞争。
- 扩容建议：每新增 50 个业务 Pod，基于 ISV 应用的资源需求增加 1 个计算节点。

---

#### 场景三：多集群管控（数据中心级）

**适用范围**  
适用于大型企业数据中心环境，要求对跨云和跨地域的多个业务集群进行统一管理。随着业务集群数量的增加，管理集群需动态扩展计算节点和资源配置，以确保高可用性和高性能。

**核心特性**

- **混合管控**：支持跨云和跨地域的业务集群统一管理。
- **弹性扩展**：管理集群资源随接入的业务集群数量线性扩展。
- **物理隔离**：建议对控制平面和计算平面进行物理隔离部署，以确保系统稳定性。

**基准资源配置**

| 节点类型 | 数量 | 最低规格 | 推荐规格 | 部署策略                 |
| -------- | ---- | -------- | -------- | ------------------------ |
| 控制节点 | 3或5 | 8C16GB   | 16C32GB  | 独立部署，启用反亲和策略 |
| 计算节点 | ≥2   | 12C24GB  | 24C48GB  | 建议预留 30% 的冗余资源  |

**动态扩展规则**

1. **纵向扩容**：单节点可以逐步升级（例如 12C24GB → 24C48GB → 48C96GB）。
2. **横向扩容**：每接入 10 个业务集群，建议增加 20% 的计算资源（增加节点数量或提升节点规格）。
3. **监控触发**：当 CPU 或内存使用率持续超过 70% 时，启动扩容措施。

**架构说明**

- 控制平面由 3 个节点构成 ETCD 集群，建议启用 TLS 加密和定期快照。
- 平台关键组件建议部署于独立计算节点上，以避免资源竞争。
- 灾备建议：跨多个可用区部署，以确保计算节点至少分布在 2 个物理故障域中。

---

### 全局规划建议

1. **资源冗余**：在生产环境中，建议预留至少 30%的资源余量，以应对突发负载。
2. **网络规划**：管理集群应部署在独立的 VPC 或 VLAN 中，以确保带宽 ≥1Gbps。
3. **存储隔离**：ETCD 存储建议使用 NVMe SSD，并与业务存储进行物理隔离。
