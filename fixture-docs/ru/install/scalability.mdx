---
weight: 20
i18n:
  title:
    en: Capacity Planning
    ru: Планирование емкости
title: Планирование емкости
sourceSHA: 87bf715a047c80a816d711b3344bf8d9babb2c1550d1aae220812266e57d1d3f
---

# Планирование емкости \{#scale}

Перед установкой управляющего кластера важно выбрать подходящий сценарий установки на основе бизнес-целей и реальных потребностей. Разные сценарии имеют различные требования к распределению инфраструктурных ресурсов и архитектурному дизайну. Ниже приведены рекомендации по планированию для трех типичных сценариев:

### Выбор сценария установки \{#scenario}

#### Сценарий первый: Функциональная проверка

**Область применения**  
Этот сценарий подходит для функциональной проверки платформы, настройки демонстрационной среды или тестирования технической осуществимости. Он предназначен исключительно для проверки основных функций платформы и не обрабатывает бизнес-трафик на уровне производства, с распределением ресурсов на минимальном уровне.

**Ключевые особенности**

- **Развертывание на одном узле**: Управляющие и вычислительные функции интегрированы в один узел.
- **Легкая нагрузка**: Запускаются только основные компоненты платформы и не более 10 демонстрационных подов.
- **Не предназначено для производства**: Не соответствует требованиям непрерывности бизнеса и высокой доступности.

**Требования к конфигурации ресурсов**

| Размерность      | Требования к спецификациям            |
| ---------------- | ------------------------------------- |
| Количество узлов | 1 (физическая или виртуальная машина) |
| Процессор        | ≥16 ядер                              |
| Память           | ≥32ГБ                                 |

**Описание архитектуры**

- Управляющий кластер развернут в однопользовательском формате, интегрируя все управляющие и вычислительные функции.
- Все бизнес-нагрузки работают на этом узле (рекомендуемое количество демонстрационных подов ≤ 10).
- Не поддерживает горизонтальное масштабирование, поэтому не подходит для производственных сред.

---

#### Сценарий второй: Доставка интеграции ISV

**Область применения**  
Этот сценарий соответствует стандартным потребностям доставки ISV (независимые поставщики программного обеспечения). При установке управляющего кластера он управляет как платформой, так и напрямую запускает приложения ISV без необходимости развертывания дополнительного бизнес-кластера.

**Ключевые особенности**

- **Развертывание уровня производства**: Прямо хостит бизнес-приложения ISV, соответствуя SLA для производственных сред.
- **Сотрудничество ресурсов**: Конфигурации узлов удовлетворяют как требованиям компонентов платформы, так и нагрузкам приложений ISV.
- **Гарантия высокой доступности**: Не менее 3 управляющих узлов формируют высокодоступную архитектуру.

**Требования к конфигурации ресурсов**

| Режим развертывания             | Тип узла            | Количество | Минимальная спецификация                            | Рекомендуемая спецификация | Заметки                                                             |
| ------------------------------- | ------------------- | ---------- | --------------------------------------------------- | -------------------------- | ------------------------------------------------------------------- |
| **Минимальное развертывание**   | Управляющий узел    | 3          | 8C16ГБ + потребности ISV                            | 12C24ГБ + потребности ISV  | Рекомендуется зарезервировать примерно 30% резервных ресурсов       |
|                                 | Вычислительный узел | 0          | —                                                   | —                          | Управляющие узлы совместно обрабатывают работу приложений ISV       |
| **Рекомендуемое развертывание** | Управляющий узел    | 3          | 8C16ГБ                                              | 12C24ГБ                    | Запускаются компоненты Kubernetes и управляющий плоскость платформы |
|                                 | Вычислительный узел | ≥2         | В зависимости от требований нагрузки приложения ISV | —                          | Запускать приложения ISV независимо; рекомендуется HA развертывание |

**Описание архитектуры**

- Развертывание компонентов платформы и бизнес-подов ISV одновременно при установке управляющего кластера, рекомендуется использовать метки узлов для изоляции критических компонентов.
- Рекомендуется запускать приложения ISV на выделенных вычислительных узлах, чтобы избежать конкуренции за ресурсы управляющей плоскости.
- Рекомендация по масштабированию: на каждые дополнительные 50 бизнес-подов увеличивайте количество вычислительных узлов на 1 в зависимости от потребностей ресурсов приложения ISV.

---

#### Сценарий третий: Управление многокластером (на уровне центра обработки данных)

**Область применения**  
Этот сценарий подходит для крупных предприятий в центрах обработки данных, требующих единого управления несколькими бизнес-кластерами в облаках и регионах. По мере увеличения числа бизнес-кластеров, управляющий кластер должен динамически расширять вычислительные узлы и конфигурации ресурсов для обеспечения высокой доступности и высокой производительности.

**Ключевые особенности**

- **Гибридное управление**: Поддерживает единое управление бизнес-кластерами в облаках и регионах.
- **Гибкое расширение**: Ресурсы управляющего кластера увеличиваются линейно с увеличением количества подключенных бизнес-кластеров.
- **Физическая изоляция**: Рекомендуется развертывать управляющую плоскость и вычислительную плоскость с физической изоляцией для обеспечения стабильности системы.

**Базовая конфигурация ресурсов**

| Тип узла            | Количество | Минимальная спецификация | Рекомендуемая спецификация | Стратегия развертывания                                         |
| ------------------- | ---------- | ------------------------ | -------------------------- | --------------------------------------------------------------- |
| Управляющий узел    | 3 или 5    | 8C16ГБ                   | 16C32ГБ                    | Независимое развертывание, включите политику антивзаимодействия |
| Вычислительный узел | ≥2         | 12C24ГБ                  | 24C48ГБ                    | Рекомендуется зарезервировать 30% резервных ресурсов            |

**Правила динамического расширения**

1. **Вертикальное масштабирование**: Один узел можно постепенно модернизировать (например, 12C24ГБ → 24C48ГБ → 48C96ГБ).
2. **Горизонтальное масштабирование**: На каждые 10 подключенных бизнес-кластеров рекомендуется увеличивать ресурсы вычисления на 20% (увеличение количества узлов или спецификаций).
3. **Мониторинг срабатываний**: Когда использование ЦП/памяти остается выше 70%, инициировать меры по масштабированию.

**Описание архитектуры**

- Управляющая плоскость состоит из 3 узлов, формирующих кластер ETCD, с рекомендованным шифрованием TLS и регулярными снимками.
- Рекомендуется развернуть ключевые компоненты платформы на независимых вычислительных узлах, чтобы избежать конкуренции за ресурсы.
- Рекомендация по восстановлению после катастроф: развертывание в разных зонах доступности, чтобы обеспечить распределение вычислительных узлов по как минимум 2 физическим зонам отказа.

---

### Общие рекомендации по планированию

1. **Резервирование ресурсов**: Рекомендуется зарезервировать не менее 30% ресурсов в производственных средах для обработки внезапных пиков нагрузки.
2. **Планирование сети**: Управляющий кластер следует развернуть в выделенной VPC или VLAN, чтобы обеспечить пропускную способность ≥1Гбит/с.
3. **Изоляция хранилища**: Рекомендуется использовать NVMe SSD для хранения ETCD и поддерживать физическую изоляцию от бизнес-хранилища.
